title: 《程序员的自我修养》读书笔记
date: 2019/5/28 14:07:12  
categories: 计算机
tags: 

 - 读书笔记
	
---

最近又重读了《程序员的自我修养》一书。有了许多新的感受。书需要重复的读。最开始的一遍很多都看不懂，也觉得没必要知道。现在很多知识都已经有了印象，看书的过程更像是查漏补缺的过程。以下是这本书的部分笔记。

<!--more-->

## CP1 温故而知新

### 内存

#### 虚拟地址

物理地址对应于物理内存，是实际存在的。虚拟地址是不存在的地址空间，每个进程有自己独立的虚拟空间，然后通过某些映射方式，将虚拟地址转化为实际的物理地址。

虚拟地址主要为了解决使用物理地址时，地址空间不隔离，内存使用效率低，运行地址不确定等问题。对于程序来说，它永远从 0x00000000 开始的连续地址，不需要考虑重定位。

#### 分段

将一个完整的虚拟空间分为若干段，每段都与物理地址上的某个区域对应，叫做分段。虚拟地址中的每个字节都对应于物理空间中的每个字节。

分段的映射过程由操作系统完成，实际的地址转换由硬件完成。

分段解决了地址空间不隔离，运行地址不确定的问题。

#### 分页

分段没有解决内存使用效率低的问题。从磁盘到物理内存的数据置换如果以段为单位，仍将进行大量的置换。因此将段更细的拆分为页，一般为 4kb 大小。

**虚拟内存到物理内存的映射关系是以页为单位的**。

![](https://github.com/zhang759740844/MyImgs/blob/master/MyBlog/cxy_1.png?raw=true)

可以看到不同进程的页可能映射到相同的物理内存中。这会造成两种情况：

1. 非活跃进程某页的物理地址上的数据会被置换为活跃进程的某页的数据。
2. 两个进程通过共享这一物理地址上的数据进行 IPC (应用进程间通信)

